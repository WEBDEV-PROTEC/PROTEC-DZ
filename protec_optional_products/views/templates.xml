<odoo>
    <data>
        <template id="protec_optional_products" inherit_id="website_sale.product" name="Protec Optional Products">
            <xpath expr="//div[@id='product_details']/hr" position="after">
                <!--===================== Accesories Products =========================-->
                <div t-if="product.accessory_product_ids" t-attf-class="accessory_product_main #{'full-width' if (not product.alternative_product_ids or not request.website.viewref('website_sale.recommended_products').active) else ''}">
                <style>
                    .owl-carousel .prod_details .oe_product_image img, .theme_carousel_common .prod_details .oe_product_image img {
                            position: relative;
                            top: 0;
                            right: 0;
                            bottom: 0;
                            left: 0;
                            display: block;
                            margin: 0px auto;
                            max-width: 60%;
                            -webkit-transition-property: all;
                            -webkit-transition-duration: 0.4s;
                            -webkit-transition-timing-function: ease-out;
                            -moz-transition-property: all;
                            -moz-transition-duration: 0.4s;
                            -moz-transition-timing-function: ease-out;
                            -ms-transition-property: all;
                            -ms-transition-duration: 0.4s;
                            -ms-transition-timing-function: ease-out;
                            -o-transition-property: all;
                            -o-transition-duration: 0.4s;
                            -o-transition-timing-function: ease-out;
                            transition-property: all;
                            transition-duration: 0.4s;
                            transition-timing-function: ease-out;
                        }
                    
                    
                </style>
                <div id="myCarousel_acce_prod" class="" data-interval="5000">
                    <h3 class="te_product_alt_h3">Ajouter un article en option</h3>
                    <div class="owl-carousel">
                        <t t-foreach="product.accessory_product_ids" t-as="alt_product">
                            <t t-set="combination_info" t-value="alt_product._get_combination_info_variant(pricelist=website.get_current_pricelist())"/>
                            <div class="border mt16 prod_details">
                                <div class="oe_product_image">
                                    <a t-attf-href="/shop/product/#{ slug(alt_product.product_tmpl_id) }">
                                        <div class="new_span dd_shop_prod_bg">
                                            <t t-if="website.is_lazy_load">
                                                <img t-attf-data-src="/web/image/product.template/#{alt_product.product_tmpl_id.id}/image_512" t-attf-src="/web/image/website/#{website.id}/lazy_load_image" class="img img-fluid lazyload" alt="Product image"/>
                                            </t>
                                            <t t-else="">
                                                <div t-field="alt_product.image_512" class="new_span dd_shop_prod_bg" t-options="{&quot;widget&quot;: &quot;image&quot;, &quot;alt-field&quot;: &quot;name&quot;}"/>
                                            </t>
                                        </div>
                                    </a>
                                    </div>
                                    <section class="alt_detail_section">
                                        <a class="product_name" t-attf-href="/shop/product/#{ slug(alt_product.product_tmpl_id) }">
                                            <h6>
                                                <span style="font-size: 14px;" t-att-title="alt_product.name" t-field="alt_product.name" t-attf-class="alt_prod_name #{'te_2_line' if (website.number_of_product_line == '2') else 'te_3_line' if (website.number_of_product_line == '3') else ''}"/>
                                            </h6>
                                        </a>
                                         <t t-if="not request.env.user.has_group('base.group_public')">
                                            <del t-attf-class="te_shop_del mr-2 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="white-space: nowrap; font-size: 12px;" t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                            <span t-if="combination_info['price']" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" style="font-size: 12px;" />
                                            <div t-attf-class="te_discount {{'' if combination_info['has_discounted_price'] else 'd-none'}}">
                                                <t t-set="difference" t-value="round(combination_info['list_price'] - combination_info['price'],2)"/>
                                                <t t-set="discount" t-value="round(difference*100/combination_info['list_price']) if combination_info['list_price'] &gt; 0 else 0"/>
                                                <div style="font-size: 12px;" class="te_percentage" t-if="discount"><span t-esc="'(%s'%(discount)+'%'"/>
                                                    Off)
                                                </div>
                                            </div>
                                        </t>
                                    </section>
                                </div>
                        </t>
                        </div>
                    </div>
                </div>
            </xpath>
        </template>
    </data>
</odoo>